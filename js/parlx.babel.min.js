"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),Parlx=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),e.length>0?this.init(e,i):0!==e.length&&(this.element=e,this.settings=this.settings(i),this.parallaxEffect(),this.addEventListeners())}return _createClass(t,[{key:"init",value:function(e,i){for(var s=0;s<e.length;s++)new t(e[s],i)}},{key:"addEventListeners",value:function(){var t=this;window.addEventListener("scroll",function(){return t.onWindowScroll()}),window.addEventListener("resize",function(){return t.onWindowResize()})}},{key:"isTouch",value:function(){if("ontouchstart"in document.documentElement)return!0}},{key:"onWindowScroll",value:function(){var t=this;this.isTouch()?this.parallaxEffect():window.requestAnimationFrame(function(){return t.parallaxEffect()})}},{key:"onWindowResize",value:function(){this.parallaxEffect()}},{key:"parallaxEffect",value:function(){this.element.style.height=this.settings.height;var t=window.pageYOffset-this.element.offsetTop;Math.abs(this.settings.speed)>.5&&(this.settings.speed=.3),this.movement=(-this.settings.speed*t).toFixed(2),this.isTouch()&&!this.settings.mobile&&(this.settings.speed=0),"front"===this.settings.type?("horizontal"===this.settings.direction?(this.moveX=this.movement,this.moveY="0"):"vertical"===this.settings.direction?(this.moveX="0",this.moveY=this.movement):"diagonal"===this.settings.direction&&(this.moveX=this.movement,this.moveY=this.movement),this.isTouch()?this.transform="translate("+this.moveX+"px, "+this.moveY+"px)":this.transform="translate3d("+this.moveX+"px, "+this.moveY+"px, 0px)",Object.assign(this.element.style,{"-webkit-transform":this.transform,transform:this.transform,transition:"transform linear","will-change":"transform"})):"back"===this.settings.type&&(Object.assign(this.element.style,{"background-repeat":"no-repeat"}),this.element.offsetWidth>this.element.offsetHeight?Object.assign(this.element.style,{"background-size":this.element.offsetWidth+" "+this.element.offsetHeight*(1+2*Math.abs(this.settings.speed))+"px"}):Object.assign(this.element.style,{"background-size":this.element.offsetWidth*(1+2*Math.abs(this.settings.speed))+"px "+this.element.offsetHeight}),"horizontal"===this.settings.direction?(this.posX="calc(50% + "+this.movement+"px)",this.posY="center"):"vertical"===this.settings.direction?(this.posX="center",this.posY="calc(50% + "+this.movement+"px)"):"diagonal"===this.settings.direction&&(this.posX="calc(50% + "+this.movement+"px)",this.posY="calc(50% + "+this.movement+"px)"),this.element.style.backgroundPosition=this.posX+" "+this.posY)}},{key:"settings",value:function(t){var e={direction:"vertical",type:"back",speed:.3,height:"400px",mobile:!0},i={};for(var s in e)if(s in t)i[s]=t[s];else if(this.element.getAttribute("data-"+s)){var n=this.element.getAttribute("data-"+s);try{i[s]=JSON.parse(n)}catch(t){i[s]=n}}else i[s]=e[s];return i}}]),t}();if(window.jQuery){var $=window.jQuery;$.fn.Parlx=function(t){for(var e=0;e<this.length;e++)new Parlx(this[e],t)}}"function"==typeof define&&define.amd?define("Parlx",[],function(){return Parlx}):"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=Parlx),exports.default=Parlx);